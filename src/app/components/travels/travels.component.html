<div class="row ">
  <div class="col-md-2">
    <img [src]="'../../../assets/img/default.jpg'" alt="Photo of a Shiba Inu"
      style="height: 200px; border-radius: 100%;">
  </div>
  <div class="col-md-2 d-flex justify-content-center align-items-center" *ngIf="AffichageAvecFilter">
    <mat-chip-listbox class="mat-mdc-chip-set-stacked" aria-label="Color selection">

      <mat-chip-option *ngFor="let chip of availableColors" [color]="chip.color"
        (selectionChange)="gettypeValue(chip.name); activateBtnSearch()">{{chip.name}}</mat-chip-option>

    </mat-chip-listbox>
  </div>

  <div class="col-md recherche d-flex justify-content-center align-items-center borderYellow"
    style="margin: 15px; background-color: black;" *ngIf="AffichageAvecFilter">
    <div class="row">
      <div class="col-md ">
        <mat-form-field>
          <mat-label>Destination</mat-label>
          <mat-select [formControl]="destinations">

            <mat-option *ngFor="let destination of destinationsList " [value]="destination"
              (click)="getDestination() ; activateBtnSearch()">{{destination}}</mat-option>

          </mat-select>
        </mat-form-field>
      </div>

      <div class="col-md">
        <mat-form-field>
          <mat-label>Arriveé - Départ</mat-label>
          <mat-date-range-input [rangePicker]="rangePicker">
            <input matStartDate placeholder="Start date" [(ngModel)]="dateDebut">
            <input matEndDate placeholder="End date" [(ngModel)]="dateFin">
          </mat-date-range-input>
          <!-- <mat-hint>MM/DD/YYYY – MM/DD/YYYY</mat-hint> -->
          <mat-datepicker-toggle matIconSuffix [for]="rangePicker"></mat-datepicker-toggle>
          <mat-date-range-picker #rangePicker>
            <mat-date-range-picker-actions>
              <button mat-button matDateRangePickerCancel>Cancel</button>
              <button mat-raised-button color="primary" matDateRangePickerApply
                (click)="getDates() ; activateBtnSearch()">Apply</button>
            </mat-date-range-picker-actions>
          </mat-date-range-picker>
        </mat-form-field>
      </div>
      <div class="col-md">
        <mat-form-field>
          <mat-label>Nombre de personnes</mat-label>
          <mat-select [formControl]="nbPersonnes">

            <mat-option *ngFor="let nb of nombres" [value]="nb" (click)="getNbPersonnes() ; activateBtnSearch()">{{ nb
              }}</mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <div class="col-md">
        <button mat-mini-fab color="primary" [disabled]="btnSearch" aria-label="Example icon button with a home icon"
          (click)="createFilter()">
          <mat-icon>search</mat-icon>
        </button>
      </div>

    </div>

  </div>



</div>
<div class="row" style="margin-top: 15px;">

  <div class="row">
    <mat-list role="list">
      <mat-list-item role="listitem"
        *ngFor="let item of travels.slice((page - 1) * pageSize, page * pageSize) ; let i = index"
        style="margin: 15px;height:auto; box-shadow: 0 15px 15px #8d9de6a5;">
        <div class="row" style="margin-top: 30px;">
          <div class="col-2">
            <!-- Contenu de la première colonne -->
            <img class="card-image" [src]="item.urlImage" alt="Photo of a Shiba Inu"
              style="width: 200px;height: 150px; ">
          </div>
          <div class="col-7" style="margin-left: 40px ;">
            <h2> {{item.name}} </h2>
            <p>
              {{item.description}}
            </p>
            <p>
              {{item.price}} €
            </p>
            <div>
              <mat-icon class="{{ getStarColor() }}" *ngFor="let _ of getStarArray(item.note)">star</mat-icon>
            </div>


            <div>
              <button mat-button class="underline-button" *ngIf="item.commentaires.length > 0" (click)="toggleComments(i)">Voir les commentaires</button>

              <!-- Comment panel -->
              <div *ngIf="showComments[i] " class="comments-panel">
               
                <ul>
                  <li *ngFor="let comment of item.commentaires">{{ comment.commentaire }}</li>
                </ul>
              </div>
            </div>


          </div>
          <div class="col-2 d-flex justify-content-center align-items-center" style=" margin-left: 30px ;">

            <button mat-raised-button style="background-color: #B7D9F4 ;" (click)="goToReservation(item)"
              *ngIf="AffichageAvecFilter">Reserver</button>

          </div>
        </div>
        <mat-divider></mat-divider>
      </mat-list-item>
    </mat-list>
  </div>

  <mat-paginator [length]="travels.length" [pageSize]="pageSize" (page)="onPageChange($event)"></mat-paginator>

</div>